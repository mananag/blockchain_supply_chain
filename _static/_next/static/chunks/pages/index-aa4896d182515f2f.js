(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{75557:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(91636)}])},91636:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return A}});var d=c(47568),e=c(34051),f=c.n(e),g=c(85893),h=c(6189),i=c(67294),j=c(63762),k=c(80967),l=c(83544),m=c(41664),n=c.n(m),o=c(68156),p=c(47027),q=c(30711),r=c(3623),s=c(45150),t=c(1508),u=c(11163);function v(){return w.apply(this,arguments)}function w(){return(w=(0,d.Z)(f().mark(function a(){var b;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,window.ethereum.send("eth_requestAccounts");case 2:return a.next=4,t.Z.eth.getAccounts();case 4:return b=a.sent,a.abrupt("return",b);case 6:case"end":return a.stop()}},a)}))).apply(this,arguments)}var x=function(a){var b,c,e=a.address,j=a.index,l=(0,i.useState)(!1),m=l[0],n=l[1],t=(0,i.useState)(""),w=(t[0],t[1]),x=(0,i.useState)(!1),y=x[0],z=x[1],A=(0,i.useState)([]),B=A[0],C=A[1],D=(0,u.useRouter)(),E=(b=(0,d.Z)(f().mark(function a(b){var c;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b.preventDefault(),console.log(e),z(!0),a.prev=3,a.next=6,v();case 6:return c=a.sent,a.next=9,h.Z.methods.moveProduct(j).send({from:c[0]});case 9:return a.next=11,D.push("/");case 11:a.next=17;break;case 13:a.prev=13,a.t0=a.catch(3),w(a.t0.message),console.log(a.t0);case 17:n(!1),z(!1);case 19:case"end":return a.stop()}},a,null,[[3,13]])})),function(a){return b.apply(this,arguments)}),F=(c=(0,d.Z)(f().mark(function a(){var b;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.Z.methods.getOrderHistory(j).call();case 2:return C(b=a.sent),a.abrupt("return",(0,g.jsx)(g.Fragment,{}));case 5:case"end":return a.stop()}},a)})),function(){return c.apply(this,arguments)});return(0,g.jsxs)(q.Z,{closeIcon:!0,open:m,trigger:(0,g.jsx)(k.Z,{children:"Show Modal"}),onClose:function(){return n(!1)},onOpen:function(){return n(!0)},size:"tiny",children:[(0,g.jsx)(r.Z,{icon:"archive",content:e[0]}),(0,g.jsxs)(q.Z.Content,{children:[(0,g.jsxs)("p",{children:[(0,g.jsx)("b",{children:"Item Owner: "}),e.itemOwner]}),(0,g.jsx)("u",{children:(0,g.jsx)("h4",{children:"Orders History"})}),0==e.norders?(0,g.jsx)(o.Z,{warning:!0,children:"No Orders placed for this item."}):(F(),(0,g.jsx)(p.Z,{ordered:!0,items:B}))]}),(0,g.jsxs)(q.Z.Actions,{children:[(0,g.jsxs)(k.Z,{color:"red",onClick:function(){return n(!1)},children:[(0,g.jsx)(s.Z,{name:"remove"})," Close"]}),(0,g.jsxs)(k.Z,{loading:y,color:"green",onClick:E,children:[(0,g.jsx)(s.Z,{name:"checkmark"})," Buy Product"]})]})]})};x.getInitialProps=(0,d.Z)(f().mark(function a(){var b,c,d,e;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.Z.methods.ic().call();case 2:b=a.sent,c=[],d=0;case 5:if(!(d<b)){a.next=13;break}return a.next=8,h.Z.methods.Items(d).call();case 8:e=a.sent,c.push(e);case 10:d++,a.next=5;break;case 13:return a.abrupt("return",{items:c,numItems:b});case 14:case"end":return a.stop()}},a)}));var y=x;function z(a){var b,c=a.items,d=a.numItems;return(0,i.useEffect)(function(){},[]),(0,g.jsx)("div",{children:(0,g.jsxs)(l.Z,{title:"Blockchain Supply Chain",children:[(0,g.jsx)("h2",{children:"Items List"}),(0,g.jsx)(n(),{href:"/items/new",children:(0,g.jsx)(k.Z,{content:"Create New Item",icon:"add circle",primary:!0,floated:"right"})}),(console.log(c,d),b=c.map(function(a,b){return{header:a[0],description:(0,g.jsx)(y,{address:a,index:b}),fluid:!0,key:b}}),(0,g.jsx)(j.Z.Group,{items:b}))]})})}z.getInitialProps=(0,d.Z)(f().mark(function a(){var b,c,d,e;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.Z.methods.ic().call();case 2:b=a.sent,c=[],d=0;case 5:if(!(d<b)){a.next=13;break}return a.next=8,h.Z.methods.Items(d).call();case 8:e=a.sent,c.push(e);case 10:d++,a.next=5;break;case 13:return a.abrupt("return",{items:c,numItems:b});case 14:case"end":return a.stop()}},a)}));var A=z}},function(a){a.O(0,[482,714,76,780,938,774,888,179],function(){var b;return a(a.s=75557)}),_N_E=a.O()}])